DROP TABLE TONY_PART;
DROP TABLE TONY_FILE_CONTENT;


DROP TABLE TONY_ORG_ENTITY;
DROP TABLE TONY_ORG_ENTITY_TYPE;

DROP TRIGGER TRG_TONY_FILE_CONTENT;
DROP TRIGGER TRG_TONY_PART;

DROP SEQUENCE SEQ_TONY_FILE_CONTENT;
DROP SEQUENCE SEQ_TONY_PART;

CREATE TABLE TONY_FILE_CONTENT (
  ID  NUMBER(19,0) NOT NULL PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL,
  CONTENT BLOB
);
CREATE SEQUENCE SEQ_TONY_FILE_CONTENT START WITH 1 INCREMENT BY 1;
create or replace trigger TRG_TONY_FILE_CONTENT before insert on TONY_FILE_CONTENT for each row when (NEW.ID is null) begin 	:NEW.ID := SEQ_TONY_FILE_CONTENT.NEXTVAL; end;

CREATE TABLE TONY_PART (
  ID  NUMBER(19,0) NOT NULL PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL
);
CREATE SEQUENCE SEQ_TONY_PART START WITH 1 INCREMENT BY 1;
create or replace trigger TRG_TONY_PART before insert on TONY_PART for each row when (NEW.ID is null) begin 	:NEW.ID := SEQ_TONY_PART.NEXTVAL; end;

alter table TONY_PART add FILE_CONTENT_ID NUMBER(19, 0);
alter table TONY_PART add constraint FK_FILE_CONTENT foreign key (FILE_CONTENT_ID) references FILE_CONTENT(ID);

create table TONY_ORG_ENTITY (
  ORG_ID NUMBER(19, 0) NOT NULL PRIMARY KEY,
  ORG_CD VARCHAR2(25) NOT NULL,
  TOR_ID NUMBER(19, 0) NULL,
  ORG_ID_PARENT NUMBER(19, 0)
)
;

CREATE TABLE TONY_ORG_ENTITY_TYPE(
  TOR_ID NUMERIC(19, 0) NOT NULL PRIMARY KEY,
  CD_SP2 VARCHAR2(25) NOT NULL,
  NAME VARCHAR2(150) NOT NULL
)
;

insert into TONY_ORG_ENTITY_TYPE (TOR_ID, CD_SP2, NAME) VALUES (1, 'TYPE_1', 'ORG ENTITY TYPE 1');
insert into TONY_ORG_ENTITY_TYPE (TOR_ID, CD_SP2, NAME) VALUES (2, 'TYPE_2', 'ORG ENTITY TYPE 2');
insert into TONY_ORG_ENTITY_TYPE (TOR_ID, CD_SP2, NAME) VALUES (3, 'TYPE_3', 'ORG ENTITY TYPE 3');
insert into TONY_ORG_ENTITY_TYPE (TOR_ID, CD_SP2, NAME) VALUES (5, 'TYPE_5', 'ORG ENTITY TYPE 5');
insert into TONY_ORG_ENTITY_TYPE (TOR_ID, CD_SP2, NAME) VALUES (7, 'TYPE_7', 'ORG ENTITY TYPE 7');


insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (1, 'ORG_1', 1, null);
insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (2, 'ORG_2', 2, 1);
insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (3, 'ORG_3', 3, 2);
insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (4, 'ORG_4', null, 1);
insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (6, 'ORG_6', 6, 1);
insert INTO TONY_ORG_ENTITY (ORG_ID, ORG_CD, TOR_ID, ORG_ID_PARENT) VALUES (7, 'ORG_7', 7, 3);

